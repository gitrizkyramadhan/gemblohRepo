<!DOCTYPE html>
<html class="no-js">

<head>
  <title>Admin Home Page</title>
  <!-- Bootstrap -->
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
  <link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
  <link href="vendors/easypiechart/jquery.easy-pie-chart.css" rel="stylesheet" media="screen">
  <link href="assets/styles.css" rel="stylesheet" media="screen">
  <link href="vendors/jGrowl/jquery.jgrowl.css" rel="stylesheet" media="screen">
  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="vendors/modernizr-2.6.2-respond-1.1.0.min.js"></script>
</head>

<body>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">Admin Panel</a>
        <div class="nav-collapse collapse">
          <ul class="nav pull-right">
            <li class="dropdown">
              <a href="#" role="button" class="dropdown-toggle" data-toggle="dropdown"> <i class="icon-user"></i> Vincent Gabriel <i class="caret"></i>

              </a>
              <ul class="dropdown-menu">
                <li>
                  <a tabindex="-1" href="#">Profile</a>
                </li>
                <li class="divider"></li>
                <li>
                  <a tabindex="-1" href="index.html">Logout</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <!--/.nav-collapse -->
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span3" id="sidebar">
        <ul class="nav nav-list bs-docs-sidenav nav-collapse collapse">
          <li>
            <a href="home.html"><i class="icon-chevron-right"></i> Dashboard</a>
          </li>
          <li>
            <a href="tablesBJPay.html"><i class="icon-chevron-right"></i> List BJPay</a>
          </li>
          <li>
            <a href="tablesTopup.html"><i class="icon-chevron-right"></i> List Topup</a>
          </li>
          <li  class="active">
            <a href="tablesComplaint.html"><i class="icon-chevron-right"></i> List Complaint</a>
          </li>
        </ul>
      </div>

      <!--/span-->
      <div class="span9" id="content">
        <div class="alert alert-success" id="alert" style="display: none;">
          <button type="button" class="close" data-dismiss="alert">×</button>
          <h4>Success</h4>
          The operation completed successfully
        </div>
        <div class="alert alert-error" id="alertErr" style="display: none;">
          <button type="button" class="close" data-dismiss="alert">×</button>
          <h4>Error</h4>
          Please Contact Your Administrator
        </div>
        <div class="row-fluid">
          <!-- block -->
          <div class="block">
            <div class="navbar navbar-inner block-header">
              <div class="muted pull-left">Informasi BJPAY</div>
            </div>
            <div class="block-content collapse in">
              <div class="span12">
                <!-- BEGIN FORM-->
                <form action="#" id="form_sample_1" class="form-horizontal">
                  <fieldset>
                    <div class="alert alert-error hide">
                      <button class="close" data-dismiss="alert"></button>
                      You have some form errors. Please check below.
                    </div>
                    <div class="alert alert-success hide">
                      <button class="close" data-dismiss="alert"></button>
                      Your form validation is successful!
                    </div>
                    <div class="control-group">
                      <label class="control-label">User ID<span class="required">*</span></label>
                      <div class="controls">
                        <input type="text" id="userid" disabled="" data-required="1" class="span6 m-wrap"/>
                      </div>
                    </div>
                    <div class="control-group">
                      <label class="control-label">BJPay Phone<span class="required">*</span></label>
                      <div class="controls">
                        <input type="text" id="bjtelp" name="telp" readonly="" ="" data-required="1" class="span6 m-wrap"/>
                      </div>
                    </div>
                    <div class="control-group">
                      <label class="control-label">Amount<span class="required">*</span></label>
                      <div class="controls">
                        <input type="text" id="amount" name="amount" data-required="1" readonly="" class="span6 m-wrap"/>
                      </div>
                    </div>
                    <div class="control-group">
                      <label class="control-label">Register Date<span class="required">*</span></label>
                      <div class="controls">
                        <input type="text" name="register-date" id="register-date" readonly="" class="span6 m-wrap"></textarea>
                      </div>
                    </div>
                    <div class="control-group">
                      <label class="control-label">Update Date<span class="required">*</span></label>
                      <div class="controls">
                        <input type="text" name="update-date" id="update-date" readonly="" data-required="1" class="span6 m-wrap"/>
                      </div>
                    </div>
                    <div class="form-actions">
                        <a href="tablesTopup.html" onclick="cekTopup();" id="topup" class="btn btn-primary">Cek Topup</a>
                    </div>
                  </fieldset>
                </form>

                <!-- END FORM-->
              </div>
            </div>
          </div>
          <!-- /block -->
          <div class="block">
            <div class="navbar navbar-inner block-header">
              <div class="muted pull-left">Daftar Transaksi BJPAY</div>
            </div>
            <div class="block-content collapse in">
              <div class="span12">
                <div class="table-toolbar">
                   <!--<div class="btn-group">
                      <a href="form.html"><button class="btn btn-success">Edit <i class="icon-plus icon-white"></i></button></a>
                   </div>
                   <div class="btn-group pull-right">
                      <button data-toggle="dropdown" class="btn dropdown-toggle">Tools <span class="caret"></span></button>
                      <ul class="dropdown-menu">
                         <li><a href="#">Print</a></li>
                         <li><a href="#">Save as PDF</a></li>
                         <li><a href="#">Export to Excel</a></li>
                      </ul>
                   </div>
                   -->
                </div>

                 <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="example">
                     <thead>
                         <tr>
                             <th>Trx Date</th>
                             <th>Amount</th>
                             <th>Description</th>
                             <th>Trx Code</th>
                         </tr>
                     </thead>
                     <tbody id="data">

                     </tbody>
                 </table>
              </div>
            </div>
          </div>
        </div>
        <!-- /validation -->
      </div>
    </div>
  </div>
  <hr>
  <footer>
    <p>&copy; Gembloh 2017</p>
  </footer>
</div>
<!--/.fluid-container-->
<script src="vendors/jquery-1.9.1.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="vendors/jGrowl/jquery.jgrowl.js"></script>
<script src="assets/scripts.js"></script>


<script src="vendors/datatables/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap.min.js"></script>
<script src="assets/DT_bootstrap.js"></script>
<script>
function cekTopup(){
  var Phone = $('#bjtelp').val();
  var url = $('#topup').attr('href');
  window.open(url+"?id="+Phone);
}

function GetURLParameter(sParam)
{

  var sPageURL = window.location.search.substring(1);
  var sURLVariables = sPageURL.split('&');
  for (var i = 0; i < sURLVariables.length; i++)
  {
    var sParameterName = sURLVariables[i].split('=');
    if (sParameterName[0] == sParam)
    {
      return decodeURIComponent(sParameterName[1]);
    }
  }
}
function topupManual(){
  var id = GetURLParameter('id');
  var request = $.ajax({
    url: "http://localhost/updatePicComp",
    type: "POST",
    data: $('#form_sample_1').serialize(),
    dataType: 'json',
    success: function(data){
      if(data.trim() == 'sukses' ){
        $('#alert').show();
        $('#alertErr').hide();
      }else{
        $('#alert').hide();
        $('#alertErr').show();
      }
      return false;
    },
    error: function(data){
      //alert(console.log(data));
    }
  });
}
$(function() {
  var id = GetURLParameter('id');
  $('#alert').hide();
  var request = $.ajax({
    url: host+"/getAccountStatement",
    type: "POST",
    data: {id : id},
    dataType: 'json',
    success: function(data){
      // console.log(data);
      $('#userid').val(data.account[0][1]);
      $('#bjtelp').val(data.account[0][2]);
      $('#amount').val(data.account[0][3]);
      $('#register-date').val(data.account[0][4]);
      $('#update-date').val(data.account[0][5]);

      $.each( data.statements, function( key, value ) {
        $('#data').append("<tr>"+"<td>"+value[1]+"</td>"+"<td>"+value[3]+"</td>"+"<td>"+value[4]+"</td>"+"<td>"+value[5]+"</td>"+"</tr>");
        });
        $('#example').dataTable( {
            "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
            "sPaginationType": "bootstrap",
            "oLanguage": {
                "sLengthMenu": "_MENU_ records per page"
            }
        });
    },
    error: function(data){
      // alert(console.log(data));
    }
  });
});
</script>
</body>

</html>
