<!DOCTYPE html>
<html class="no-js">

    <head>
        <title>Admin Home Page</title>
        <!-- Bootstrap -->
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        <link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
        <link href="vendors/easypiechart/jquery.easy-pie-chart.css" rel="stylesheet" media="screen">
        <link href="assets/styles.css" rel="stylesheet" media="screen">
        <link href="vendors/jGrowl/jquery.jgrowl.css" rel="stylesheet" media="screen">
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <script src="vendors/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>

    <body>
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="#">Admin Panel</a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right">
                            <li class="dropdown">
                                <a href="#" role="button" class="dropdown-toggle" data-toggle="dropdown"> <i class="icon-user"></i> Vincent Gabriel <i class="caret"></i>

                                </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a tabindex="-1" href="#">Profile</a>
                                    </li>
                                    <li class="divider"></li>
                                    <li>
                                        <a tabindex="-1" href="index.html">Logout</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <!--/.nav-collapse -->
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span3" id="sidebar">
                    <ul class="nav nav-list bs-docs-sidenav nav-collapse collapse">
                        <li>
                            <a href="home.html"><i class="icon-chevron-right"></i> Dashboard</a>
                        </li>
                        <li>
                            <a href="tablesBJPay.html"><i class="icon-chevron-right"></i> List BJPay</a>
                        </li>
                        <li>
                            <a href="tablesTopup.html"><i class="icon-chevron-right"></i> List Topup</a>
                        </li>
                        <li  class="active">
                            <a href="tablesComplaint.html"><i class="icon-chevron-right"></i> List Complaint</a>
                        </li>
                    </ul>
                </div>

                <!--/span-->
                <div class="span9" id="content">
                    <div class="alert alert-success" id="alert" style="display: none;">
                            <button type="button" class="close" data-dismiss="alert">×</button>
                            <h4>Success</h4>
                            The operation completed successfully
                    </div>
                    <div class="alert alert-error" id="alertErr" style="display: none;">
                            <button type="button" class="close" data-dismiss="alert">×</button>
                            <h4>Error</h4>
                            Please Contact Your Administrator
                    </div>
                    <div class="row-fluid">
                         <!-- block -->
                        <div class="block">
                            <div class="navbar navbar-inner block-header">
                                <div class="muted pull-left">Form Input</div>
                            </div>
                            <div class="block-content collapse in">
                                <div class="span12">
                    <!-- BEGIN FORM-->
                    <form action="#" id="form_sample_1" class="form-horizontal">
                        <fieldset>
                            <div class="alert alert-error hide">
                                <button class="close" data-dismiss="alert"></button>
                                You have some form errors. Please check below.
                            </div>
                            <div class="alert alert-success hide">
                                <button class="close" data-dismiss="alert"></button>
                                Your form validation is successful!
                            </div>
                            <div class="control-group">
                                <label class="control-label">User ID<span class="required">*</span></label>
                                <div class="controls">
                                    <input type="text" id="userid" disabled="" data-required="1" class="span6 m-wrap"/>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">BJPay Phone<span class="required">*</span></label>
                                <div class="controls">
                                    <input type="text" id="bjtelp" name="telp" readonly="" ="" data-required="1" class="span6 m-wrap"/>
                                    <a href="formBJPAY.html" onclick="cekTopup();" target="_blank" id="topup" class="btn btn-primary">Cek Account BJPAY</a>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">Line ID<span class="required">*</span></label>
                                <div class="controls">
                                    <input type="text" readonly name="lineID" id="line-id" class="span6 m-wrap"></textarea>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">Services<span class="required">*</span></label>
                                <div class="controls">
                                    <input type="text" id="service" readonly="" name="service" data-required="1" class="span6 m-wrap"/>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">Transaction Date<span class="required">*</span></label>
                                <div class="controls">
                                    <input type="text" id="trx-date" readonly="" name="service" data-required="1" class="span6 m-wrap"/>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">Details<span class="required">*</span></label>
                                <div class="controls">
                                    <textarea name="detail" id="detail" readonly="" class="span6 m-wrap"></textarea>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">PIC<span class="required">*</span></label>
                                <div class="controls">
                                    <input type="text" name="pic" id="pic" data-required="1" class="span6 m-wrap"/>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">BJ Notes<span class="required">*</span></label>
                                <div class="controls">
                                    <textarea  name="bjdesc" id="bj-notes" class="span6 m-wrap"></textarea>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">Status<span class="required">*</span></label>
                                <div class="controls">
                                    <select id="status">
                                      <option value="0">OPEN</option>
                                      <option value="1">CLOSED</option>
                                      <option value="2">ON PROGRESS</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-actions">
                                <a onClick="updateData()"  class="btn btn-primary">Save</a>
                                <button type="button" class="btn">Cancel</button>
                                <a href="#myModal" data-toggle="modal" class="btn btn-danger">Send Feedback</a>
                            </div>
                        </fieldset>
                    </form>


                    <div id="myModal" class="modal hide">
                        <div class="modal-header">
                            <button data-dismiss="modal" class="close" type="button">&times;</button>
                            <h3>Send Feedback</h3>
                        </div>
                        <div class="modal-body">
                            <textarea id="feedback-message" name="feedback-message" class="input-xlarge textarea" placeholder="Enter text ..." style="width: 510px; height: 200px"></textarea><br />
                            <a onClick="sendFeedback()" class="btn btn-primary btn-large">Send</a>
                        </div>
                    </div>

                    <!-- END FORM-->
                </div>
                </div>
            </div>
                        <!-- /block -->
            </div>
                     <!-- /validation -->
                </div>
                </div>
            </div>
            <hr>
            <footer>
                <p>&copy; Gembloh 2017</p>
            </footer>
        </div>
        <!--/.fluid-container-->
        <script src="vendors/jquery-1.9.1.min.js"></script>
        <script src="bootstrap/js/bootstrap.min.js"></script>
        <script src="vendors/jGrowl/jquery.jgrowl.js"></script>
        <script src="assets/scripts.js"></script>
        <script>
        function cekTopup(){
            var Phone = $('#bjtelp').val();
            var url = $('#topup').attr('href');
            window.open(url+"?id="+Phone);
        }

        function GetURLParameter(sParam)
            {

                var sPageURL = window.location.search.substring(1);
                var sURLVariables = sPageURL.split('&');
                for (var i = 0; i < sURLVariables.length; i++)
                {
                    var sParameterName = sURLVariables[i].split('=');
                    if (sParameterName[0] == sParam)
                    {
                        return decodeURIComponent(sParameterName[1]);
                    }
                }
            }
        function updateData(){
            var request = $.ajax({
                url: host+"/updatePicComp",
                type: "POST",
                data: {message:$('#feedback-message').serialize()},
                dataType: 'json',
                success: function(data){
                    if(data.trim() == 'sukses' ){
                        $('#alert').show();
                        $('#alertErr').hide();
                    }else{
                        $('#alert').hide();
                        $('#alertErr').show();
                    }
                    return false;
                  },
                  error: function(data){
                      //alert(console.log(data));
                  }
              });
        }
        function sendFeedback(){
          var request = $.ajax({
              url: host+"/updatePicComp",
              type: "POST",
              data: $('#form_sample_1').serialize(),
              dataType: 'json',
              success: function(data){
                  if(data.trim() == 'sukses' ){
                      $('#alert').show();
                      $('#alertErr').hide();
                  }else{
                      $('#alert').hide();
                      $('#alertErr').show();
                  }
                  return false;
                },
                error: function(data){
                    //alert(console.log(data));
                }
            });
        }
        $(function() {
            var id = GetURLParameter('id');
            $('#alert').hide();
            var request = $.ajax({
                url: host+"/getCompforUpdt",
                type: "POST",
                data: {id : id},
                dataType: 'json',
                success: function(data){
                  console.log(data);
                    $('#userid').val(data[0][1]);
                    $('#bjtelp').val(data[0][2]);
                    $('#service').val(data[0][3]);
                    $('#detail').val(data[0][4]);
                    $('#pic').val(data[0][5]);
                    $('#status').val(data[0][6]);
                    $('#trx-date').val(data[0][7]);
                  },
                  error: function(data){
                      alert(console.log(data));
                  }
              });
        });
        </script>
    </body>

</html>
